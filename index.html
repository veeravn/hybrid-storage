<!DOCTYPE html>
<html lang="en">

<head>
  <script src="serviceworker.js"></script>
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-31PPT6CB61"></script>
  <script src="https://sdk.amazonaws.com/js/aws-sdk-2.357.0.min.js"></script>
  <script type="text/javascript" src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'G-31PPT6CB61');
  </script>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
  <title>Hybrid Storage</title>
  <script>
   let isDropHereVisible = false;

window.addEventListener("dragover", function (e) {
  e.preventDefault();
  if (!isDropHereVisible) {
    document.querySelector(".Drop-here").style.display = "block";
    isDropHereVisible = true;
  }
});

window.addEventListener("drop", function (e) {
  e.preventDefault();
  document.querySelector(".Drop-here").style.display = "none";
  isDropHereVisible = false;
  if (e.dataTransfer.files.length > 0) {
    handleFiles(e.dataTransfer.files);
  }
});

window.addEventListener("dragenter", function (e) {
  e.preventDefault();
  if (!isDropHereVisible) {
    document.querySelector(".Drop-here").style.display = "block";
    isDropHereVisible = true;
  }
});

window.addEventListener("dragleave", function (e) {
  e.preventDefault();
  const dropHere = document.querySelector(".Drop-here");
  const rect = dropHere.getBoundingClientRect();
  const x = e.clientX;
  const y = e.clientY;
  const isOutside = x < rect.left || x > rect.right || y < rect.top || y > rect.bottom;
  const isLeftDocument = !document.elementFromPoint(x, y);
  if (isOutside || isLeftDocument) {
    dropHere.style.display = "none";
    isDropHereVisible = false;
  }
  // if (e.dataTransfer.files.length > 0) {
  //   handleFiles(e.dataTransfer.files);
  // }
});
function handleFiles(files) {
      // Handle dropped files here
      console.log(files);
      // Call the function to upload the file
      // uploadImage(files[0]);
      // set this file to the input element of the file input
      document.getElementById("file").files = files;
      uploadImage();
    }
  </script>
</head>

<body>
 
  <div class="card">
    <h1>Hybrid Storage</h1>

    <h2>Upload File</h2>
    <input type="file" id="file" onchange="flesize()" /><br>
    
    <center><button id="upload" onclick="uploadImage()">Upload<img id="uping" src="images/upload.png" alt="none" /></button>
    </center>
    <br />
    <left>
      <div id="myProgress" style="display:none;">
        <div id="myBar"></div>
      </div>
    </left>
  </div>
  <center>
    <div class="Drop-here">
      <h1 class="Drop-text">Drop Here</h1>
    </div>
  </center>
  
</body>
<script type="text/javascript" src="script.js"></script>
</html>